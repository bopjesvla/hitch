<!DOCTYPE html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <title>Hitchmap - Find hitchhiking spots on a map - Add new spots</title>
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link rel="manifest" href="/manifest.json">

    $folium_head
    <script src=" https://cdn.jsdelivr.net/npm/leaflet-geometryutil@0.10.3/src/leaflet.geometryutil.min.js "></script>
    <script src="https://cdn.jsdelivr.net/npm/leaflet-arrowheads@1.4.0/src/leaflet-arrowheads.min.js"></script>
    <script src="https://unpkg.com/leaflet-control-geocoder@2.4.0/dist/Control.Geocoder.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet-control-geocoder@2.4.0/dist/Control.Geocoder.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <style>
     $hitch_style
    </style>
</head>
<body>
    $folium_body
    <div class="sidebar spot spot-form-container">
        <h3>New Review</h3>
        <p class=greyed></p>
        <form id=spot-form action=experience method=post>
            <input type="hidden" name="coords">
            <label>How do you rate the spot?</label>
            <div class="clear">
                <div class="rate">
                    <input required type="radio" id="star5" name="rate" value="5" />
                    <label for="star5" title="5 stars">5 stars</label>
                    <input type="radio" id="star4" name="rate" value="4" />
                    <label for="star4" title="4 stars">4 stars</label>
                    <input type="radio" id="star3" name="rate" value="3" />
                    <label for="star3" title="3 stars">3 stars</label>
                    <input type="radio" id="star2" name="rate" value="2" />
                    <label for="star2" title="2 stars">2 stars</label>
                    <input type="radio" id="star1" name="rate" value="1" />
                    <label for="star1" title="1 star">1 star</label>
                </div>
            </div>
            <label>How long did you wait? Leave blank if you don't remember.</label>
            <input type="number" name="wait" min="0" max="9999" size="4"> minutes
            <label>Comment (optional)</label>
            <div><textarea name=comment></textarea></div>
            <label for="username">Public nickname (alphanumeric)</label>
            <input name="username" maxlength="32" pattern="[a-zA-Z0-9]*">
            <br>
            <details closed id="extended_info">
                <summary id="details-summary" style="display:list-item">more optional fields<span id="details-seen" style='color: red;'> (check values, then submit again)</span></summary>
                <label for="signal">How did you signal to drivers?</label>
                <div>
                    <select id="signal" name="signal" class="driver-signal">
                        <option selected value="null" title="null"></option>
                        <option value="sign" title="Sign">Sign</option>
                        <option value="thumb" title="thumb">Thumb</option>
                        <option value="ask" title="talk">Asked around</option>
                        <option value="ask-sign" title="talk">Asked around with a sign in hand</option>
                    </select>
                </div>
                <label for="datetime_ride">When did you get the ride?<span id="no-ride"> If you didn't get a ride, when did you stop soliciting rides?</span></label>
                <input id="datetime_ride" type="datetime-local" name="datetime_ride">
                <!-- maximum date is today -->
                <script>                    
                    document.getElementById("datetime_ride").max = (new Date().toISOString().slice(0,11)) + "23:59";
                </script>
            </details>

            <!-- <label for="gender">Optionally, what genders were you and your co-hitchhikers?</label> -->
            <!-- <input type="number" value="0" name="males" min="0" max="9" size="2"> males, -->
            <!-- <input type="number" value="0" name="females" min="0" max="9" size="2"> females, -->
            <!-- <input value="0" type="number" name="others" min="0" max="9" size="2"> others -->

            <button>Submit</button>
        </form>
    </div>
    <div class="sidebar show-spot spot">
        <h3 id="spot-header"><a target="_blank"></a></h3>
        <input type="checkbox" id="toggle" class="toggle-checkbox">
        <div class="report">
            <label for="toggle" class="toggle-label">
                <svg class="triangle" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 10 10">
                    <polygon points="0,0 10,5 0,10" fill="black" />
                </svg>
            </label>
        </div>
        <div class=report-options>
            <div class="report-dup">
                <a href="javascript:;"
                   title="Is there another spot close by that is a duplicate of this spot?">
                    <i class="fa-solid fa-left-right" style="color: red"></i>
                    Merge into nearby spot
                </a>
            </div>
        </div>
        <div id='spot-summary'></div>
        <h4>Comments</h4>
        <div id='spot-text'></div>
        <div><button>Review this spot</button></div>
        <i id="extra-text"></i>
        <hr>
    </div>
    <div class="sidebar success">
        <h3>Success!</h3>

        <p>Thank you for your contribution!</p>
        <p>Your review will appear on the map within 10 minutes. Refreshing may be needed.</p>
    </div>
    <div class="sidebar success-duplicate">
        <h3>Success!</h3>

        <p>Thanks for your contribution!</p>
        <p>Your duplicate report will be subject to a manual review, or it will be merged automatically within 10 minutes.</p>
    </div>
    <div class="sidebar menu">
        <ul class="no-style">
            <li><i class="fa fa-github"></i><a href="https://github.com/bopjesvla/hitch">Contribute</a></li>
            <li><i class="fa fa-github"></i><a href="https://github.com/bopjesvla/hitch/issues/new">Report bugs</a></li>
            <li><i class="fa fa-download"></i><a href="https://hitchmap.com/dump.sqlite">Download spots as SQLite</a>
            </li>
            <li><i class="fa fa-download"></i><a href="javascript:exportAsGPX()">Download spots as GPX</a></li>
            <li><i class="fa fa-map-pin"></i><a href="https://hitchmap.com/recent.html">Recent reviews</a></li>
            <li><i class="fa fa-chart-simple"></i><a href="https://hitchmap.com/dashboard.html">Charts & graphs</a></li>
        </ul>
        <h4>Credits</h4>
        <p>
            &copy; <a href=https://github.com/bopjesvla>Bob de Ruiter</a> &
            <a href=https://tillwenke.github.io/about />Till Wenke</a>
        </p>
        <p>
            Maps and data by
            <a href=https://openstreetmap.org>OpenStreetMap</a>,
            <a href=https://tinyworldmap.com>tinyworldmap</a> and
            <a href=https://hitchwiki.org>HitchWiki</a>
        </p>
        <h4>License</h4>
        <p>
            Hitchmap software is licensed under AGPL 3.0. The Hitchmap database is licensed under the ODBL, the license used by OpenStreetMap.
        </p>
    </div>
    <a href="javascript:void(0);" id="sb-close">
        <svg width="14" height="14" version="1.1" xmlns="http://www.w3.org/2000/svg">
            <line x1="1" y1="13"
                  x2="13" y2="1"
                  stroke="black"
                  stroke-width="2"/>
            <line x1="1" y1="1"
                  x2="13" y2="13"
                  stroke="black"
                  stroke-width="2"/>
        </svg>
    </a>
    <div class="topbar spot step1">
        <span>Zoom the crosshairs into your hitchhiking spot. Be as precise as possible!</span>
        <br><button>Done</button><button>Cancel</button>
    </div>
    <div class="topbar spot step2">
        <span>
            Where did your ride take you? Move the crosshairs near that location, then press done.<sup><a href="javascript:void(0);" title="If you were dropped off at multiple locations when using this spot, either choose something in the middle or leave multiple reviews." class=step2-help>?</a></sup>
        </span>
        <br><button>Skip</button><button>Done</button><button>Cancel</button>
    </div>
    <div class="topbar route step1">
        <span>Zoom the crosshairs into your starting point.</span>
        <br>
        <span>The route planner works best for long-distance travel. Coverage is best in Europe.</span>
        <br><button>Done</button><button>Cancel</button>
    </div>
    <div class="topbar route step2">
        <span>Move the crosshairs to your destination.</span>
        <br><button>Done</button><button>Cancel</button>
    </div>
    <div class="topbar duplicate">
        <span>Click on the duplicated marker.</span>
        <br><button>Cancel</button>
    </div>
    <script>
     var allMarkers = [], destinationMarkers = []
    </script>
    <script>
     $folium_script
    </script>
    <script>
     $hitch_script
    </script>
    <script async defer src="https://scripts.simpleanalyticscdn.com/latest.js"></script>
</body>
